<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心理的効果を用いた工業デザイン</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="side-images left" id="side-images-left"></div>
    <div class="side-images right" id="side-images-right"></div>

    <div class="container">
        <h1>心理的効果を用いた工業デザイン</h1>
        
        <div class="test-section">
            <h2 class="section-title">中間発表プレテストのリアルタイム集計結果</h2>
            <button id="show-chart-button" class="home-button">プレテストの結果表示はこちら</button>
        </div>

        <h2 class="section-title">ねらい</h2>
        <p class="section-body">
            製品のデザインが人々の心理に与える影響を活用してより魅力的で機能的なものづくり
        </p>

        <div class="test-section">
            <h2 class="section-title">砂時計アニメーションによる心理的効果計測テスト</h2>
            <a href="sand/sand.html" class="home-button">砂時計のテストを開始する</a>
        </div>

        <div class="test-section">
            <h2 class="section-title">プログレスバーによる心理的効果計測テスト</h2>
            <a href="progress/progress.html" class="home-button">プログレスバーのテストを開始する</a>
        </div>

        <div class="test-section">
            <h2 class="section-title">落下スピード感覚テスト</h2>
            <a href="speed/speed.html" class="home-button">落下スピードのテストを開始する</a>
        </div>
        <div class="test-section">
            <h2 class="section-title">感じ方が変わるデジタル時計</h2>
            <a href="clock/clock.html" class="home-button">デジタル時計を表示する</a>
        </div>
    </div>

    <div id="chart-modal" class="modal">
        <div class="modal-content">
            <span id="close-modal-button" class="close-button">&times;</span>
            <h2 class="section-title" style="margin-top: 0; text-align: center;">現在の回答状況</h2>
            <div class="chart-container">
                <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQq4wTkbfC2-3rSeuiRJxBj11UssWdC9fPQFRN-6H-WYvytn-xvOd4fqEJM714KsqW2JN30_c_UE2TW/pubchart?oid=360856784&format=interactive"></iframe>
            </div>
        </div>
    </div>

    <script>
        const IMAGE_SETTINGS = {
            imagesPerSide: 4,
            imageMaxWidthRatio: 0.5,
            horizontalOffsetRatio: -0.5,
            verticalPaddingRatio: 0.01,
        };
        
        const leftImageContainer = document.getElementById('side-images-left');
        const rightImageContainer = document.getElementById('side-images-right');

        function setupSideImages() {
            const imageBaseUrl = 'https://bb54125213.github.io/image/';
            const originalSources = [
                { src: `${imageBaseUrl}image11.png`, color: 1 },
                { src: `${imageBaseUrl}image21.png`, color: 2 },
                { src: `${imageBaseUrl}image31.png`, color: 3 }
            ];
            let imageSources = [];
            for (let i = 0; i < IMAGE_SETTINGS.imagesPerSide; i++) {
                imageSources.push(originalSources[i % originalSources.length]);
            }
            imageSources = [...imageSources, ...imageSources];
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            const shuffledImages = shuffleArray(imageSources);
            const leftImagesData = shuffledImages.slice(0, IMAGE_SETTINGS.imagesPerSide);
            const rightImagesData = shuffledImages.slice(IMAGE_SETTINGS.imagesPerSide);
            const sideImageContainers = [
                { container: leftImageContainer, images: leftImagesData, isLeft: true },
                { container: rightImageContainer, images: rightImagesData, isLeft: false }
            ];
            const totalImages = IMAGE_SETTINGS.imagesPerSide;
            if (totalImages <= 0) return;
            const padding = window.innerHeight * IMAGE_SETTINGS.verticalPaddingRatio;
            const availableHeight = window.innerHeight - (padding * 2);
            const slotHeight = availableHeight / totalImages;
            sideImageContainers.forEach(side => {
                const { container, images, isLeft } = side;
                container.innerHTML = '';
                shuffleArray(images).forEach((imgData, index) => {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'image-wrapper';
                    const img = document.createElement('img');
                    img.src = imgData.src;
                    img.dataset.color = imgData.color;
                    img.style.animationDelay = `-${(Math.random() * 20).toFixed(2)}s`;
                    img.style.animationDuration = `${(15 + Math.random() * 10).toFixed(2)}s`; 
                    img.style.maxWidth = `${IMAGE_SETTINGS.imageMaxWidthRatio * 100}vw`;
                    wrapper.appendChild(img);
                    const verticalPosition = padding + (index * slotHeight) + (slotHeight / 2);
                    wrapper.style.top = `${verticalPosition}px`;
                    if (isLeft) {
                        wrapper.style.left = '0';
                        wrapper.style.transform = `translateX(${IMAGE_SETTINGS.horizontalOffsetRatio * 100}%) translateY(-50%)`;
                    } else {
                        wrapper.style.right = '0';
                        wrapper.style.transform = `translateX(${-IMAGE_SETTINGS.horizontalOffsetRatio * 100}%) translateY(-50%)`;
                    }
                    container.appendChild(wrapper);
                });
            });
        }
        
        let resizeTimer;
        window.addEventListener('resize', () => { clearTimeout(resizeTimer); resizeTimer = setTimeout(setupSideImages, 250); });
        window.addEventListener('scroll', () => { const scrollY = window.scrollY; leftImageContainer.style.transform = `translateY(-${scrollY * 0.3}px)`; rightImageContainer.style.transform = `translateY(-${scrollY * 0.3}px)`; });
        
        window.addEventListener('DOMContentLoaded', () => {
            setupSideImages();
        });

        const chartModal = document.getElementById('chart-modal');
        const showChartButton = document.getElementById('show-chart-button');
        const closeModalButton = document.getElementById('close-modal-button');

        showChartButton.addEventListener('click', () => {
            chartModal.classList.add('show');
        });

        closeModalButton.addEventListener('click', () => {
            chartModal.classList.remove('show');
        });

        window.addEventListener('click', (event) => {
            if (event.target == chartModal) {
                chartModal.classList.remove('show');
            }
        });
    </script>
</body>
</html>